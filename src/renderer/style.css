/* Zenith Assistant CSS v1.6.2 - Theme Fixes */

/* --- Base & Variables --- */
:root { /* Default Theme: Glass */
    --bg-color-rgb: 30, 30, 30;
    --glass-bg-rgb: 45, 45, 45;
    --glass-border-rgb: 80, 80, 80;
    --glass-alpha: 0.7;
    --blur-amount: 10px;

    --text-color: #e8e8e8;
    --text-color-secondary: #a0a0a0;
    --accent-color: #007aff;
    --accent-color-rgb: 0, 122, 255; /* Added RGB for potential rgba use */
    --accent-hover: #0056b3;
    --user-msg-bg: var(--accent-color);
    --assistant-msg-bg-rgb: 55, 55, 55;
    --assistant-msg-alpha: 0.8;

    --error-color: #ff3b30;
    --listening-color: #34c759;
    --awaiting-input-color: #ff9500;
    --connected-color: #34c759;
    --disconnected-color: #ff3b30;

    --code-bg: rgba(0, 0, 0, 0.35);
    --code-copy-btn-bg: rgba(100, 100, 100, 0.7);
    --code-copy-btn-hover-bg: rgba(120, 120, 120, 0.9);
    --code-text-color: #f0f0f0;

    --border-radius: 10px;
    --border-radius-small: 6px;
    --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    --transition-speed: 0.2s;

    /* Derived variables applied via selectors */
    --container-border-color: rgba(var(--glass-border-rgb), 0.4);
    --container-bg-color: rgba(var(--bg-color-rgb), var(--glass-alpha));
    --assistant-msg-bg-color: rgba(var(--assistant-msg-bg-rgb), var(--assistant-msg-alpha));
    --assistant-msg-border-color: rgba(var(--glass-border-rgb), 0.3);
    --title-bar-bg-color: rgba(var(--glass-bg-rgb), 0.4);
    --title-bar-border-color: rgba(var(--glass-border-rgb), 0.3);
    --interaction-area-bg-color: rgba(var(--glass-bg-rgb), 0.5);
    --interaction-area-border-color: rgba(var(--glass-border-rgb), 0.3);
    --input-wrapper-bg-color: rgba(0, 0, 0, 0.2);
    --input-wrapper-border-color: rgba(var(--glass-border-rgb), 0.4);
    --button-bg-color: rgba(var(--glass-border-rgb), 0.3);
    --button-hover-bg-color: rgba(var(--glass-border-rgb), 0.5);
    --scrollbar-thumb-color: rgba(var(--glass-border-rgb), 0.5);
    --scrollbar-thumb-hover-color: rgba(var(--glass-border-rgb), 0.8);
}

/* --- Theme Definitions --- */
/* Dark Theme */
:root[data-theme="dark"] {
    --bg-color-rgb: 18, 18, 18; --glass-bg-rgb: 30, 30, 30; --glass-border-rgb: 55, 55, 55;
    --glass-alpha: 0.95; --blur-amount: 3px;
    --text-color: #f5f5f7; --text-color-secondary: #8e8e93;
    --assistant-msg-bg-rgb: 40, 40, 40; --assistant-msg-alpha: 1.0;
    --code-bg: rgba(0, 0, 0, 0.5); --code-copy-btn-bg: rgba(80, 80, 80, 0.9); --code-copy-btn-hover-bg: rgba(100, 100, 100, 1);
    --container-border-color: rgba(var(--glass-border-rgb), 0.6); --input-wrapper-bg-color: rgba(0, 0, 0, 0.3);
    --button-bg-color: rgba(var(--glass-border-rgb), 0.6); --button-hover-bg-color: rgba(var(--glass-border-rgb), 0.8);
    --scrollbar-thumb-color: rgba(var(--glass-border-rgb), 0.7); --scrollbar-thumb-hover-color: rgba(var(--glass-border-rgb), 0.9);
}
/* Light Theme */
:root[data-theme="light"] {
    --bg-color-rgb: 242, 242, 247; --glass-bg-rgb: 255, 255, 255; --glass-border-rgb: 199, 199, 204;
    --glass-alpha: 0.8; --blur-amount: 15px; --text-color: #1d1d1f; --text-color-secondary: #6e6e73;
    --accent-color: #007aff; --user-msg-bg: var(--accent-color);
    --assistant-msg-bg-rgb: 239, 239, 244; --assistant-msg-alpha: 1.0;
    --assistant-msg-border-color: rgba(var(--glass-border-rgb), 0.5);
    --code-bg: rgba(0, 0, 0, 0.05); --code-text-color: #333; --code-copy-btn-bg: rgba(200, 200, 205, 0.7); --code-copy-btn-hover-bg: rgba(180, 180, 185, 0.9);
    --container-border-color: rgba(var(--glass-border-rgb), 0.7); --title-bar-bg-color: rgba(var(--glass-bg-rgb), 0.6);
    --interaction-area-bg-color: rgba(var(--glass-bg-rgb), 0.7); --input-wrapper-bg-color: rgba(0, 0, 0, 0.04);
    --input-wrapper-border-color: rgba(var(--glass-border-rgb), 0.6); --button-bg-color: rgba(var(--glass-border-rgb), 0.4); --button-hover-bg-color: rgba(var(--glass-border-rgb), 0.6);
    --scrollbar-thumb-color: rgba(var(--glass-border-rgb), 0.7); --scrollbar-thumb-hover-color: rgba(var(--glass-border-rgb), 0.9);
}
/* Ocean Blue Theme */
:root[data-theme="ocean"] {
    --bg-color-rgb: 15, 23, 42; --glass-bg-rgb: 30, 41, 59; --glass-border-rgb: 71, 85, 105;
    --glass-alpha: 0.85; --blur-amount: 8px; --text-color: #e2e8f0; --text-color-secondary: #94a3b8;
    --accent-color: #38bdf8; --accent-hover: #0ea5e9; --user-msg-bg: var(--accent-color);
    --assistant-msg-bg-rgb: 51, 65, 85; --assistant-msg-alpha: 0.95;
    --container-border-color: rgba(var(--glass-border-rgb), 0.5); --input-wrapper-border-color: rgba(var(--glass-border-rgb), 0.6);
    --button-bg-color: rgba(var(--glass-border-rgb), 0.4); --button-hover-bg-color: rgba(var(--glass-border-rgb), 0.6);
    --scrollbar-thumb-color: rgba(var(--glass-border-rgb), 0.6); --scrollbar-thumb-hover-color: rgba(var(--glass-border-rgb), 0.8);
}
/* Forest Green Theme */
:root[data-theme="forest"] {
    --bg-color-rgb: 17, 24, 39; --glass-bg-rgb: 31, 41, 55; --glass-border-rgb: 75, 85, 99;
    --glass-alpha: 0.85; --blur-amount: 8px; --text-color: #d1d5db; --text-color-secondary: #9ca3af;
    --accent-color: #34d399; --accent-hover: #10b981; --user-msg-bg: var(--accent-color);
    --assistant-msg-bg-rgb: 55, 65, 81; --assistant-msg-alpha: 0.95;
    --container-border-color: rgba(var(--glass-border-rgb), 0.5); --input-wrapper-border-color: rgba(var(--glass-border-rgb), 0.6);
    --button-bg-color: rgba(var(--glass-border-rgb), 0.4); --button-hover-bg-color: rgba(var(--glass-border-rgb), 0.6);
    --scrollbar-thumb-color: rgba(var(--glass-border-rgb), 0.6); --scrollbar-thumb-hover-color: rgba(var(--glass-border-rgb), 0.8);
}
/* Rose Pink Theme */
:root[data-theme="rose"] {
    --bg-color-rgb: 43, 20, 32; --glass-bg-rgb: 65, 35, 50; --glass-border-rgb: 100, 60, 80;
    --glass-alpha: 0.85; --blur-amount: 8px; --text-color: #fce7f3; --text-color-secondary: #fbcfe8;
    --accent-color: #f472b6; --accent-hover: #ec4899; --user-msg-bg: var(--accent-color);
    --assistant-msg-bg-rgb: 88, 45, 68; --assistant-msg-alpha: 0.95;
    --container-border-color: rgba(var(--glass-border-rgb), 0.5); --input-wrapper-border-color: rgba(var(--glass-border-rgb), 0.6);
    --button-bg-color: rgba(var(--glass-border-rgb), 0.4); --button-hover-bg-color: rgba(var(--glass-border-rgb), 0.6);
    --scrollbar-thumb-color: rgba(var(--glass-border-rgb), 0.6); --scrollbar-thumb-hover-color: rgba(var(--glass-border-rgb), 0.8);
}
/* Royal Purple Theme */
:root[data-theme="purple"] {
    --bg-color-rgb: 28, 18, 40; --glass-bg-rgb: 45, 30, 60; --glass-border-rgb: 80, 65, 100;
    --glass-alpha: 0.85; --blur-amount: 8px; --text-color: #e9d5ff; --text-color-secondary: #d8b4fe;
    --accent-color: #a855f7; --accent-hover: #9333ea; --user-msg-bg: var(--accent-color);
    --assistant-msg-bg-rgb: 68, 48, 90; --assistant-msg-alpha: 0.95;
    --container-border-color: rgba(var(--glass-border-rgb), 0.5); --input-wrapper-border-color: rgba(var(--glass-border-rgb), 0.6);
    --button-bg-color: rgba(var(--glass-border-rgb), 0.4); --button-hover-bg-color: rgba(var(--glass-border-rgb), 0.6);
    --scrollbar-thumb-color: rgba(var(--glass-border-rgb), 0.6); --scrollbar-thumb-hover-color: rgba(var(--glass-border-rgb), 0.8);
}
/* Crimson Red Theme */
:root[data-theme="crimson"] {
    --bg-color-rgb: 40, 18, 20; --glass-bg-rgb: 60, 30, 35; --glass-border-rgb: 100, 65, 70;
    --glass-alpha: 0.85; --blur-amount: 8px; --text-color: #fecaca; --text-color-secondary: #fca5a5;
    --accent-color: #ef4444; --accent-hover: #dc2626; --user-msg-bg: var(--accent-color);
    --assistant-msg-bg-rgb: 90, 48, 55; --assistant-msg-alpha: 0.95;
    --container-border-color: rgba(var(--glass-border-rgb), 0.5); --input-wrapper-border-color: rgba(var(--glass-border-rgb), 0.6);
    --button-bg-color: rgba(var(--glass-border-rgb), 0.4); --button-hover-bg-color: rgba(var(--glass-border-rgb), 0.6);
    --scrollbar-thumb-color: rgba(var(--glass-border-rgb), 0.6); --scrollbar-thumb-hover-color: rgba(var(--glass-border-rgb), 0.8);
}
/* Nord Theme FIX */
:root[data-theme="nord"] {
    --nord0: 46,52,64; --nord1: 59,66,82; --nord3: 76,86,106;
    --nord4: 216,222,233; --nord5: 229,233,240; --nord6: 236,239,244;
    --nord7: 143,188,187; --nord8: 136,192,208; --nord9: 94,129,172; --nord10: 129,161,193;
    --nord14: 180,142,173;

    --bg-color-rgb: var(--nord0); --glass-bg-rgb: var(--nord1); --glass-border-rgb: var(--nord3);
    --glass-alpha: 0.95; --blur-amount: 3px;
    --text-color: #ECEFF4; /* Nord6 - FIX: Explicit near-white */
    --text-color-secondary: var(--nord4);
    --accent-color: var(--nord8); --accent-hover: var(--nord7);
    --user-msg-bg: #5E81AC;
    --user-msg-alpha: 1.0 /* Nord Blue for User */
    --assistant-msg-bg-rgb: var(--nord3); /* FIX: Use nord3 for better contrast */
    --assistant-msg-alpha: 1.0;
    --assistant-msg-border-color: rgba(var(--glass-border-rgb), 0.5);
    --code-bg: rgba(var(--nord0), 0.8); --code-text-color: var(--nord4); --code-copy-btn-bg: rgba(var(--nord3), 0.9); --code-copy-btn-hover-bg: var(--nord3);
    --container-border-color: rgba(var(--glass-border-rgb), 0.6); --input-wrapper-bg-color: rgba(var(--nord0), 0.5);
    --button-bg-color: rgba(var(--glass-border-rgb), 0.7); --button-hover-bg-color: rgba(var(--nord3), 0.9);
    --scrollbar-thumb-color: rgba(var(--glass-border-rgb), 0.7); --scrollbar-thumb-hover-color: rgba(var(--nord3), 0.9);
    --error-color: #bf616a; --listening-color: #a3be8c; --awaiting-input-color: #ebcb8b;
    --connected-color: var(--listening-color); --disconnected-color: var(--error-color);
    --accent-color-rgb: 136, 192, 208; /* RGB for nord8 accent */
}


/* --- General Styles --- */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; overflow: hidden; font-family: var(--font-family); background-color: transparent; color: var(--text-color); font-size: 14px; line-height: 1.4; }
body { opacity: 0; transform: scale(0.98) translateY(10px); transition: opacity 0.4s ease-out, transform 0.4s ease-out; }
body.loaded { opacity: 1; transform: scale(1) translateY(0); }

/* --- Container --- */
.container { height: 100%; display: flex; flex-direction: column; border-radius: var(--border-radius); overflow: hidden; background-color: var(--container-bg-color); backdrop-filter: blur(var(--blur-amount)); -webkit-backdrop-filter: blur(var(--blur-amount)); border: 1px solid var(--container-border-color); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25); }

/* --- Title Bar --- */
.title-bar { display: flex; align-items: center; padding: 0; background-color: var(--title-bar-bg-color); backdrop-filter: blur(calc(var(--blur-amount)/1.5)); -webkit-backdrop-filter: blur(calc(var(--blur-amount)/1.5)); border-bottom: 1px solid var(--title-bar-border-color); height: 40px; flex-shrink: 0; }
.title-bar-drag-area { flex-grow: 1; height: 100%; display: flex; align-items: center; padding-left: 15px; -webkit-app-region: drag; user-select: none; }
.title { font-weight: 600; font-size: 1em; color: var(--text-color); }
.connection-status { display: inline-block; width: 10px; height: 10px; border-radius: 50%; margin-left: 8px; background-color: var(--disconnected-color); transition: background-color 0.5s ease; vertical-align: middle; flex-shrink: 0; }
.connection-status.connected { background-color: var(--connected-color); }
.window-controls { display: flex; height: 100%; -webkit-app-region: no-drag; }
.window-controls button { background: none; border: none; color: var(--text-color-secondary); font-size: 1.1em; padding: 0 10px; height: 100%; cursor: pointer; transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease; font-weight: normal; line-height: 40px; display: flex; align-items: center; justify-content: center; width: 40px; }
#settings-btn { font-size: 1.2em; }
.window-controls button:hover { background-color: rgba(128, 128, 128, 0.15); color: var(--text-color); }
#clear-chat-btn:hover { color: var(--accent-color); } #close-btn:hover { background-color: var(--error-color); color: white; }

/* --- Chat Area --- */
.chat-container { flex-grow: 1; overflow-y: auto; padding: 10px 15px 15px 15px; display: flex; flex-direction: column; gap: 12px; }
.chat-container::-webkit-scrollbar { width: 6px; } .chat-container::-webkit-scrollbar-track { background: transparent; } .chat-container::-webkit-scrollbar-thumb { background-color: var(--scrollbar-thumb-color); border-radius: 3px; } .chat-container::-webkit-scrollbar-thumb:hover { background-color: var(--scrollbar-thumb-hover-color); }
.message { padding: 10px 15px; border-radius: var(--border-radius); max-width: 85%; word-wrap: break-word; line-height: 1.5; position: relative; opacity: 0; transform: translateY(10px); animation: messageSlideIn 0.3s ease-out forwards; border: 1px solid transparent; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); } @keyframes messageSlideIn { to { opacity: 1; transform: translateY(0); } }
.message.user { background-color: var(--user-msg-bg); color: white; align-self: flex-end; border-bottom-right-radius: 4px; }
.message.assistant { background-color: var(--assistant-msg-bg-color); backdrop-filter: blur(calc(var(--blur-amount) / 3)); -webkit-backdrop-filter: blur(calc(var(--blur-amount) / 3)); border: 1px solid var(--assistant-msg-border-color); color: var(--text-color); align-self: flex-start; border-bottom-left-radius: 4px; }
.message a { color: var(--accent-color); text-decoration: underline; word-break: break-all; } .message a:hover { opacity: 0.8; }
.message pre { background-color: var(--code-bg); padding: 12px 15px; border-radius: var(--border-radius-small); margin: 10px 0; overflow-x: auto; border: 1px solid var(--assistant-msg-border-color); position: relative; white-space: pre; font-size: 0.9em; }
.message code { font-family: 'SF Mono', Consolas, Menlo, monospace; color: var(--code-text-color); white-space: pre-wrap; word-wrap: break-word; }
.message pre code { background: none; padding: 0; display: block; white-space: pre; }
.message :not(pre) > code { background-color: rgba(128, 128, 128, 0.15); padding: 2px 5px; border-radius: 4px; font-size: 0.85em; }
.copy-code-btn { position: absolute; top: 6px; right: 6px; background-color: var(--code-copy-btn-bg); color: var(--text-color); border: none; border-radius: 4px; padding: 4px 8px; font-size: 0.75em; font-weight: bold; cursor: pointer; opacity: 0; transition: opacity 0.2s ease, background-color 0.2s ease; z-index: 1; }
.message pre:hover .copy-code-btn { opacity: 1; }
.copy-code-btn:hover { background-color: var(--code-copy-btn-hover-bg); color: white; }
.copy-code-btn:active { transform: scale(0.95); }
.message img { max-width: 100%; border-radius: var(--border-radius-small); margin-top: 8px; display: block; background-color: rgba(128, 128, 128, 0.1); }
.message.error { background-color: rgba(var(--error-color), 0.8); color: white; align-self: center; text-align: center; border-color: rgba(var(--error-color), 0.9); backdrop-filter: blur(3px); -webkit-backdrop-filter: blur(3px); }
.message.assistant.thinking::after { content:''; position:absolute; bottom:0; left:0; width:100%; height:2px; background:linear-gradient(90deg, transparent, var(--accent-color), transparent); animation: thinkingLine 1.5s linear infinite; } @keyframes thinkingLine { 0%{transform:translateX(-100%);} 100%{transform:translateX(100%);} }

/* --- Interaction Area --- */
.interaction-area { padding: 12px 15px; border-top: 1px solid var(--interaction-area-border-color); background-color: var(--interaction-area-bg-color); backdrop-filter: blur(calc(var(--blur-amount)*0.9)); -webkit-backdrop-filter: blur(calc(var(--blur-amount)*0.9)); flex-shrink: 0; position: relative; transition: background-color var(--transition-speed) ease; }
.interaction-area.awaiting-input { background-color: rgba(var(--awaiting-input-color), 0.15); }
.input-wrapper { display: flex; align-items: flex-end; gap: 8px; margin-bottom: 10px; background-color: var(--input-wrapper-bg-color); border: 1px solid var(--input-wrapper-border-color); border-radius: var(--border-radius); padding: 6px 8px; transition: border-color var(--transition-speed) ease, box-shadow var(--transition-speed) ease; }
.input-wrapper:focus-within { border-color: rgba(var(--accent-color), 0.8); box-shadow: 0 0 0 2px rgba(var(--accent-color), 0.2); }
.interaction-area.awaiting-input .input-wrapper { border-color: rgba(var(--awaiting-input-color), 0.8); box-shadow: 0 0 0 2px rgba(var(--awaiting-input-color), 0.2); }
#query-input { flex-grow: 1; background-color: transparent; color: var(--text-color); border: none; border-radius: var(--border-radius-small); padding: 8px 10px; font-size: 1em; font-family: var(--font-family); resize: none; min-height: 40px; max-height: 120px; line-height: 1.4; outline: none; scrollbar-width: thin; scrollbar-color: var(--scrollbar-thumb-color) transparent; }
#query-input::-webkit-scrollbar { width: 5px; } #query-input::-webkit-scrollbar-track { background: transparent; } #query-input::-webkit-scrollbar-thumb { background-color: var(--scrollbar-thumb-color); border-radius: 3px; }
#query-input::placeholder { color: var(--text-color-secondary); opacity: 0.7; transition: color 0.2s ease; }
#query-input:disabled::placeholder { color: rgba(var(--text-color-secondary), 0.4); }
.interaction-area button { background-color: var(--button-bg-color); color: var(--text-color-secondary); border: 1px solid transparent; border-radius: var(--border-radius-small); cursor: pointer; transition: all var(--transition-speed) ease; font-size: 1.4em; width: 40px; height: 40px; flex-shrink: 0; display: flex; justify-content: center; align-items: center; }
.interaction-area button:hover { background-color: var(--button-hover-bg-color); color: var(--text-color); }
.interaction-area button:active { transform: scale(0.95); }
.interaction-area button.disabled, .interaction-area button:disabled { opacity: 0.4; cursor: not-allowed; pointer-events: none; background-color: var(--button-bg-color) !important; color: var(--text-color-secondary) !important; }
#send-button { background-color: var(--accent-color); color: white; border: none; width: 40px; height: 40px; }
#send-button:hover:not(:disabled) { background-color: var(--accent-hover); }
.interaction-area.awaiting-input #send-button { background-color: var(--awaiting-input-color); } .interaction-area.awaiting-input #send-button:hover:not(:disabled) { background-color: darken(var(--awaiting-input-color), 10%); }
.action-buttons { display: flex; justify-content: flex-start; gap: 8px; align-items: center; }
#mic-button.listening { background-color: var(--listening-color); color: white; animation: pulse 0.8s infinite alternate ease-in-out; } @keyframes pulse { from{box-shadow: 0 0 0 0 rgba(52, 199, 89, 0.5);} to{box-shadow: 0 0 0 6px rgba(52, 199, 89, 0);} }
#webcam-button.active { background-color: var(--error-color); color: white; }
.stop-button { position: absolute; top: -45px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(var(--error-color), 0.8);
    color: white; 
    border: 1px solid rgba(255, 255, 255, 0.2); 
    border-radius: var(--border-radius-small); 
    padding: 5px 15px; 
    font-size: 0.85em; 
    width: auto; height: auto; backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); opacity: 0; transition: opacity var(--transition-speed) ease, top var(--transition-speed) ease; pointer-events: none; z-index: 10; } 
.stop-button:not(.hidden) { opacity: 1; top: -40px; pointer-events: auto; } 
.stop-button:hover { background-color: rgba(var(--error-color), 1.0); }
.status-indicator { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); background-color: rgba(0, 0, 0, 0.7); color: white; padding: 5px 15px; border-radius: 15px; font-size: 0.8em; opacity: 0; transition: opacity 0.3s ease; pointer-events: none; z-index: 20; white-space: nowrap; } .status-indicator.show { opacity: 1; }

/* --- Settings Panel --- */
.settings-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.3); backdrop-filter: blur(2px); -webkit-backdrop-filter: blur(2px); z-index: 90; opacity: 0; pointer-events: none; transition: opacity 0.3s ease-in-out; }
.settings-overlay.visible { opacity: 1; pointer-events: auto; }
.settings-panel { position: absolute; top: 45px; right: 10px; width: 300px; background-color: var(--container-bg-color); backdrop-filter: blur(var(--blur-amount)); -webkit-backdrop-filter: blur(var(--blur-amount)); border: 1px solid var(--container-border-color); border-radius: var(--border-radius-small); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); z-index: 100; opacity: 0; transform: translateY(-10px); visibility: hidden; transition: opacity 0.2s ease-out, transform 0.2s ease-out, visibility 0s linear 0.2s; color: var(--text-color); }
.settings-panel.visible { opacity: 1; transform: translateY(0); visibility: visible; transition: opacity 0.2s ease-out, transform 0.2s ease-out, visibility 0s linear 0s; }
.settings-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; border-bottom: 1px solid var(--interaction-area-border-color); }
.settings-header h3 { margin: 0; font-size: 1.1em; font-weight: 600; }
.settings-close-btn { background: none; border: none; color: var(--text-color-secondary); font-size: 1.5em; cursor: pointer; padding: 0 5px; line-height: 1; } .settings-close-btn:hover { color: var(--text-color); }
.settings-content { padding: 15px; display: flex; flex-direction: column; gap: 15px; max-height: calc(100vh - 150px); overflow-y: auto; }
.settings-content fieldset { border: 1px solid var(--interaction-area-border-color); padding: 10px 15px 15px 15px; border-radius: var(--border-radius-small); margin: 0; }
.settings-content legend { font-weight: 600; padding: 0 5px; font-size: 0.9em; color: var(--text-color-secondary); margin-bottom: 12px; }
.theme-options.button-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; }
.theme-btn { padding: 8px 5px; border: 1px solid var(--input-wrapper-border-color); border-radius: var(--border-radius-small); background-color: transparent; color: var(--text-color-secondary); cursor: pointer; transition: all var(--transition-speed) ease; font-size: 0.85em; text-align: center; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.theme-btn:hover { background-color: var(--button-hover-bg-color); color: var(--text-color); }
.theme-btn.active { border-color: var(--accent-color); color: var(--accent-color); font-weight: bold; background-color: rgba(var(--accent-color-rgb, 0, 122, 255), 0.1); }
.setting-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.setting-item label:first-child { font-size: 0.95em; color: var(--text-color); margin-right: 10px; flex-shrink: 0; }
.switch { position: relative; display: inline-block; width: 44px; height: 24px; flex-shrink: 0; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--button-bg-color); border: 1px solid var(--input-wrapper-border-color); transition: .4s; }
.slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 2px; bottom: 2px; background-color: var(--text-color); transition: .4s; }
input:checked + .slider { background-color: var(--accent-color); border-color: var(--accent-color); }
input:focus + .slider { box-shadow: 0 0 0 2px rgba(var(--accent-color-rgb, 0, 122, 255), 0.3); }
input:checked + .slider:before { transform: translateX(20px); background-color: white; } /* White handle when on */
.slider.round { border-radius: 24px; } .slider.round:before { border-radius: 50%; }
.settings-action-btn { width: 100%; padding: 8px 10px; border: 1px solid var(--input-wrapper-border-color); border-radius: var(--border-radius-small); background-color: var(--button-bg-color); color: var(--text-color); cursor: pointer; transition: background-color var(--transition-speed) ease; font-size: 0.9em; margin-top: 5px; }
.settings-action-btn:hover { background-color: var(--button-hover-bg-color); }
.settings-action-btn:active { transform: scale(0.98); }
.settings-action-btn:disabled { opacity: 0.5; cursor: not-allowed; }